# Prometheus datasource for Istio/mesh metrics (NFL Wallet east/west).
# Default: Promxy/ACM Observability (cluster g62mw). Si 401: usar grafana-datasource-prometheus-bearer-token.yaml.
# Otras opciones in-cluster: thanos-querier.openshift-monitoring.svc.cluster.local:9091, prometheus-user-workload...
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDatasource
metadata:
  name: prometheus-istio
  namespace: observability
spec:
  instanceSelector:
    matchLabels:
      dashboards: nfl-wallet
  datasource:
    name: Prometheus
    type: prometheus
    access: proxy
    url: "https://promxy-acm-observability.apps.cluster-g62mw.dynamic.redhatworkshops.io"
    isDefault: true
    uid: prometheus
    jsonData:
      timeInterval: "15s"
      httpMethod: GET
      disableMetricsLookup: true
      tlsSkipVerify: true
